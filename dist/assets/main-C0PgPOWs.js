import"./modulepreload-polyfill-B5Qt9EMX.js";const y=(l,i,o={})=>new Promise((s,r)=>{fetch(i).then(t=>{if(!t.ok)throw new Error(`Failed to load ${i}: ${t.statusText}`);return t.text()}).then(t=>{const a=document.querySelector(l);if(!a)return console.warn(`loadHTML: target selector '${l}' not found.`),r(new Error(`Target selector '${l}' not found`));const{position:c="innerHTML"}=o;c==="innerHTML"?a.innerHTML=t:a.insertAdjacentHTML(c,t),s()}).catch(t=>{console.error(t),r(t)})});(()=>{const l=(e,n=document)=>Array.from(n.querySelectorAll(e)),i=(e,n=document)=>n.querySelector(e);let o,s,r,t;const a="/partials/broker-login.html";function c(){o&&(o.hidden=!1,document.body.style.overflow="hidden",setTimeout(()=>r?.focus(),40))}function f(){o&&(o.hidden=!0,s?.reset(),m(),document.body.style.overflow="")}function m(){l(".bl-error",s).forEach(e=>e.classList.remove("bl-error")),l(".bl-errtext",s).forEach(e=>e.remove())}function u(e,n){e.classList.add("bl-error");const d=document.createElement("div");d.className="bl-errtext",d.innerHTML=`<i class="fa-solid fa-circle-exclamation"></i> ${n}`,e.after(d)}function h(){m();let e=!0;return r.value.trim()||(u(r,"Username is required"),e=!1),t.value||(u(t,"Password is required"),e=!1),e}function b(e){const n=s.querySelector('button[type="submit"]');n.disabled=e,n.classList.toggle("is-loading",e),e?(n.dataset.lbl=n.textContent,n.textContent="Signing inâ€¦"):n.dataset.lbl&&(n.textContent=n.dataset.lbl,delete n.dataset.lbl)}function w(){const e=window.AuthState;e?.login&&e.login({role:"broker",name:r.value.trim()}),window.location.href="/broker/index.html"}function g(e){e.preventDefault(),h()&&(b(!0),setTimeout(()=>{const n=r.value.trim(),d=t.value;n==="BROKER"&&d==="123"?w():(b(!1),u(r,"Use demo BROKER"),u(t,"Use demo 123"),r.focus())},700))}function L(){o=i("#brokerLogin"),o&&(s=i("#bl-form",o),r=i("#bl-user",o),t=i("#bl-pass",o),i("#dealerLoginBtn")?.addEventListener("click",c),l(".bl-close, .bl-overlay",o).forEach(e=>e.addEventListener("click",f)),document.addEventListener("keydown",e=>{!o||o.hidden||e.key==="Escape"&&f()}),s?.addEventListener("submit",g))}async function v(){try{await y("body",a,{position:"beforeend"}),setTimeout(L,10)}catch(e){console.error("Failed to load broker login modal:",e)}}v(),window.BrokerLogin={open:c,close:f}})();document.addEventListener("DOMContentLoaded",async()=>{const l=document.querySelectorAll(".hero-slide");let i=0;function o(r){l.forEach((t,a)=>{t.classList.toggle("active",a===r)})}function s(){i=(i+1)%l.length,o(i)}l.length>0&&(o(i),setInterval(s,5e3)),window.Cart&&window.Cart.subscribe&&window.Cart.subscribe(r=>{const t=document.getElementById("cartCount");t&&(t.textContent=r.items.length)})});
