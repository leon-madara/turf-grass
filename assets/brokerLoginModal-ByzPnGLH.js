(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const v=(c,i,n={})=>new Promise((s,t)=>{fetch(i).then(r=>{if(!r.ok)throw new Error(`Failed to load ${i}: ${r.statusText}`);return r.text()}).then(r=>{const l=document.querySelector(c);if(!l)return console.warn(`loadHTML: target selector '${c}' not found.`),t(new Error(`Target selector '${c}' not found`));const{position:a="innerHTML"}=n;a==="innerHTML"?l.innerHTML=r:l.insertAdjacentHTML(a,r),s()}).catch(r=>{console.error(r),t(r)})});(()=>{const c=(e,o=document)=>Array.from(o.querySelectorAll(e)),i=(e,o=document)=>o.querySelector(e);let n,s,t,r;const l="/turf-grass/partials/broker-login.html";function a(){n&&(n.hidden=!1,document.body.style.overflow="hidden",setTimeout(()=>t?.focus(),40))}function f(){n&&(n.hidden=!0,s?.reset(),m(),document.body.style.overflow="")}function m(){c(".bl-error",s).forEach(e=>e.classList.remove("bl-error")),c(".bl-errtext",s).forEach(e=>e.remove())}function u(e,o){e.classList.add("bl-error");const d=document.createElement("div");d.className="bl-errtext",d.innerHTML=`<i class="fa-solid fa-circle-exclamation"></i> ${o}`,e.after(d)}function g(){m();let e=!0;return t.value.trim()||(u(t,"Username is required"),e=!1),r.value||(u(r,"Password is required"),e=!1),e}function b(e){const o=s.querySelector('button[type="submit"]');o.disabled=e,o.classList.toggle("is-loading",e),e?(o.dataset.lbl=o.textContent,o.textContent="Signing inâ€¦"):o.dataset.lbl&&(o.textContent=o.dataset.lbl,delete o.dataset.lbl)}function y(){const e=window.AuthState;e?.login&&e.login({role:"broker",name:t.value.trim()}),window.location.href="/turf-grass/broker/index.html"}function h(e){e.preventDefault(),g()&&(b(!0),setTimeout(()=>{const o=t.value.trim(),d=r.value;o==="BROKER"&&d==="123"?y():(b(!1),u(t,"Use demo BROKER"),u(r,"Use demo 123"),t.focus())},700))}function L(){n=i("#brokerLogin"),n&&(s=i("#bl-form",n),t=i("#bl-user",n),r=i("#bl-pass",n),i("#dealerLoginBtn")?.addEventListener("click",a),c(".bl-close, .bl-overlay",n).forEach(e=>e.addEventListener("click",f)),document.addEventListener("keydown",e=>{!n||n.hidden||e.key==="Escape"&&f()}),s?.addEventListener("submit",h))}async function p(){try{await v("body",l,{position:"beforeend"}),setTimeout(L,10)}catch(e){console.error("Failed to load broker login modal:",e)}}p(),window.BrokerLogin={open:a,close:f}})();
