const h=(o,i,n={})=>new Promise((l,r)=>{fetch(i).then(t=>{if(!t.ok)throw new Error(`Failed to load ${i}: ${t.statusText}`);return t.text()}).then(t=>{const d=document.querySelector(o);if(!d)return console.warn(`loadHTML: target selector '${o}' not found.`),r(new Error(`Target selector '${o}' not found`));const{position:s="innerHTML"}=n;s==="innerHTML"?d.innerHTML=t:d.insertAdjacentHTML(s,t),l()}).catch(t=>{console.error(t),r(t)})});(()=>{const o=(e,a=document)=>Array.from(a.querySelectorAll(e)),i=(e,a=document)=>a.querySelector(e);let n,l,r,t;const d="/turf-grass/partials/broker-login.html";function s(){n&&(n.hidden=!1,document.body.style.overflow="hidden",setTimeout(()=>r?.focus(),40))}function c(){n&&(n.hidden=!0,l?.reset(),u(),document.body.style.overflow="")}function u(){o(".bl-error",l).forEach(e=>e.classList.remove("bl-error")),o(".bl-errtext",l).forEach(e=>e.remove())}function m(e,a){e.classList.add("bl-error");const f=document.createElement("div");f.className="bl-errtext",f.innerHTML=`<i class="fa-solid fa-circle-exclamation"></i> ${a}`,e.after(f)}function g(){u();let e=!0;return r.value.trim()||(m(r,"Username is required"),e=!1),t.value||(m(t,"Password is required"),e=!1),e}function b(e){const a=l.querySelector('button[type="submit"]');a.disabled=e,a.classList.toggle("is-loading",e),e?(a.dataset.lbl=a.textContent,a.textContent="Signing inâ€¦"):a.dataset.lbl&&(a.textContent=a.dataset.lbl,delete a.dataset.lbl)}function v(){const e=window.AuthState;e?.login&&e.login({role:"broker",name:r.value.trim()}),window.location.href="/turf-grass/broker/broker.html"}function L(e){e.preventDefault(),g()&&(b(!0),setTimeout(()=>{const a=r.value.trim(),f=t.value;a==="BROKER"&&f==="123"?v():(b(!1),m(r,"Use demo BROKER"),m(t,"Use demo 123"),r.focus())},700))}function w(){n=i("#brokerLogin"),n&&(l=i("#bl-form",n),r=i("#bl-user",n),t=i("#bl-pass",n),i("#dealerLoginBtn")?.addEventListener("click",s),o(".bl-close, .bl-overlay",n).forEach(e=>e.addEventListener("click",c)),document.addEventListener("keydown",e=>{!n||n.hidden||e.key==="Escape"&&c()}),l?.addEventListener("submit",L))}async function y(){try{await h("body",d,{position:"beforeend"}),setTimeout(w,10)}catch(e){console.error("Failed to load broker login modal:",e)}}y(),window.BrokerLogin={open:s,close:c}})();(()=>{let o,i;function n(){o=document.getElementById("hamburgerMenu"),i=document.getElementById("mobileNav"),o&&i&&l()}function l(){o.addEventListener("click",r),i.querySelectorAll(".nav-link").forEach(s=>{s.addEventListener("click",t)}),document.addEventListener("click",s=>{!o.contains(s.target)&&!i.contains(s.target)&&t()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&t()})}function r(){o.classList.toggle("active"),i.classList.toggle("active"),i.classList.contains("active")?document.body.style.overflow="hidden":document.body.style.overflow=""}function t(){o.classList.remove("active"),i.classList.remove("active"),document.body.style.overflow=""}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()})();document.addEventListener("DOMContentLoaded",function(){const o=document.querySelector(".header");document.querySelector(".contact-hero")||document.querySelector(".hero")||document.querySelector(".title-page");const i={offset:100,floatingClass:"floating"};let n=!1,l=!1;function r(){const u=window.scrollY>=i.offset;u!==n&&t(u),l=!1}function t(c){c?(o.classList.add(i.floatingClass),o.setAttribute("data-state","floating")):(o.classList.remove(i.floatingClass),o.removeAttribute("data-state")),n=c;const u=new CustomEvent("navbarStateChange",{detail:{floating:n}});window.dispatchEvent(u)}function d(){l||(requestAnimationFrame(()=>{r(),l=!1}),l=!0)}function s(){r(),window.addEventListener("scroll",d,{passive:!0});let c;window.addEventListener("resize",()=>{clearTimeout(c),c=setTimeout(()=>{r()},250)}),window.addEventListener("orientationchange",()=>{setTimeout(r,300)}),setTimeout(()=>{o.style.transition="all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},100)}s(),window.Navbar={enableFloating:()=>t(!0),disableFloating:()=>t(!1),toggleFloating:()=>t(!n),getState:()=>({floating:n}),refresh:()=>r()}});
