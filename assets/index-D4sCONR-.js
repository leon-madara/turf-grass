(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const c of e.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function s(t){if(t.ep)return;t.ep=!0;const e=o(t);fetch(t.href,e)}})();const v=(l,n,o={})=>new Promise((s,t)=>{fetch(n).then(e=>{if(!e.ok)throw new Error(`Failed to load ${n}: ${e.statusText}`);return e.text()}).then(e=>{const c=document.querySelector(l);if(!c)return console.warn(`loadHTML: target selector '${l}' not found.`),t(new Error(`Target selector '${l}' not found`));const{position:a="innerHTML"}=o;a==="innerHTML"?c.innerHTML=e:c.insertAdjacentHTML(a,e),s()}).catch(e=>{console.error(e),t(e)})});(()=>{const l=(r,i=document)=>Array.from(i.querySelectorAll(r)),n=(r,i=document)=>i.querySelector(r);let o,s,t,e;const c="/partials/broker-login.html";function a(){o&&(o.hidden=!1,document.body.style.overflow="hidden",setTimeout(()=>t?.focus(),40))}function f(){o&&(o.hidden=!0,s?.reset(),m(),document.body.style.overflow="")}function m(){l(".bl-error",s).forEach(r=>r.classList.remove("bl-error")),l(".bl-errtext",s).forEach(r=>r.remove())}function u(r,i){r.classList.add("bl-error");const d=document.createElement("div");d.className="bl-errtext",d.innerHTML=`<i class="fa-solid fa-circle-exclamation"></i> ${i}`,r.after(d)}function h(){m();let r=!0;return t.value.trim()||(u(t,"Username is required"),r=!1),e.value||(u(e,"Password is required"),r=!1),r}function b(r){const i=s.querySelector('button[type="submit"]');i.disabled=r,i.classList.toggle("is-loading",r),r?(i.dataset.lbl=i.textContent,i.textContent="Signing inâ€¦"):i.dataset.lbl&&(i.textContent=i.dataset.lbl,delete i.dataset.lbl)}function g(){const r=window.AuthState;r?.login&&r.login({role:"broker",name:t.value.trim()}),window.location.href="/broker/index.html"}function y(r){r.preventDefault(),h()&&(b(!0),setTimeout(()=>{const i=t.value.trim(),d=e.value;i==="BROKER"&&d==="123"?g():(b(!1),u(t,"Use demo BROKER"),u(e,"Use demo 123"),t.focus())},700))}function L(){o=n("#brokerLogin"),o&&(s=n("#bl-form",o),t=n("#bl-user",o),e=n("#bl-pass",o),n("#dealerLoginBtn")?.addEventListener("click",a),l(".bl-close, .bl-overlay",o).forEach(r=>r.addEventListener("click",f)),document.addEventListener("keydown",r=>{!o||o.hidden||r.key==="Escape"&&f()}),s?.addEventListener("submit",y))}async function w(){try{await v("body",c,{position:"beforeend"}),setTimeout(L,10)}catch(r){console.error("Failed to load broker login modal:",r)}}w(),window.BrokerLogin={open:a,close:f}})();document.addEventListener("DOMContentLoaded",async()=>{const l=document.querySelectorAll(".hero-slide");let n=0;function o(t){l.forEach((e,c)=>{e.classList.toggle("active",c===t)})}function s(){n=(n+1)%l.length,o(n)}l.length>0&&(o(n),setInterval(s,5e3)),window.Cart&&window.Cart.subscribe&&window.Cart.subscribe(t=>{const e=document.getElementById("cartCount");e&&(e.textContent=t.items.length)})});
