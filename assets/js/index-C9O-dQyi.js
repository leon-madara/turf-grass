const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/discountModal-D6AeGENL.js","assets/js/cartState-Dk7kX525.js","assets/js/couponModal-Cu4ki2Tl.js"])))=>i.map(i=>d[i]);
(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(e){if(e.ep)return;e.ep=!0;const i=a(e);fetch(e.href,i)}})();(()=>{let o,r;function a(){o=document.getElementById("hamburgerMenu"),r=document.getElementById("mobileNav"),o&&r&&c()}function c(){o.addEventListener("click",e),r.querySelectorAll(".nav-link").forEach(f=>{f.addEventListener("click",i)}),document.addEventListener("click",f=>{!o.contains(f.target)&&!r.contains(f.target)&&i()}),document.addEventListener("keydown",f=>{f.key==="Escape"&&i()})}function e(){o.classList.toggle("active"),r.classList.toggle("active"),r.classList.contains("active")?document.body.style.overflow="hidden":document.body.style.overflow=""}function i(){o.classList.remove("active"),r.classList.remove("active"),document.body.style.overflow=""}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a()})();const P=(o,r,a={})=>new Promise((c,e)=>{fetch(r).then(i=>{if(!i.ok)throw new Error(`Failed to load ${r}: ${i.statusText}`);return i.text()}).then(i=>{const s=document.querySelector(o);if(!s)return console.warn(`loadHTML: target selector '${o}' not found.`),e(new Error(`Target selector '${o}' not found`));const{position:f="innerHTML"}=a;f==="innerHTML"?s.innerHTML=i:s.insertAdjacentHTML(f,i),c()}).catch(i=>{console.error(i),e(i)})});(()=>{const o=(l,n=document)=>Array.from(n.querySelectorAll(l)),r=(l,n=document)=>n.querySelector(l);let a=null,c=null,e=null,i=null;const s="/Eastleigh-Turf-Grass-Clean/partials/broker-login.html",f="BROKER",m="123",w="/Eastleigh-Turf-Grass-Clean/broker/broker.html",p=700;function E(){if(!a){console.warn("Modal not initialized");return}a.hidden=!1,document.body.style.overflow="hidden",setTimeout(()=>{e&&e.focus()},40)}function b(){if(!a){console.warn("Modal not initialized");return}a.hidden=!0,c&&c.reset(),y(),document.body.style.overflow=""}function y(){c&&(o(".bl-error",c).forEach(l=>{l.classList.remove("bl-error")}),o(".bl-errtext",c).forEach(l=>{l.remove()}))}function L(l,n){l.classList.add("bl-error");const v=document.createElement("div");v.className="bl-errtext",v.innerHTML=`<i class="fa-solid fa-circle-exclamation"></i> ${n}`,l.insertAdjacentElement("afterend",v)}function S(){y();let l=!0;return(!e||!e.value.trim())&&(e&&L(e,"Username is required"),l=!1),(!i||!i.value)&&(i&&L(i,"Password is required"),l=!1),l}function M(l){const n=c&&c.querySelector('button[type="submit"]');if(n)if(n.disabled=l,n.classList.toggle("is-loading",l),l)n.dataset.originalLabel=n.textContent||"",n.textContent="Signing inâ€¦";else{const v=n.dataset.originalLabel;v&&(n.textContent=v,delete n.dataset.originalLabel)}}function t(){try{const l=window.AuthState;l&&l.login&&l.login({role:"broker",name:e&&e.value.trim()||""}),window.location.href=w}catch(l){console.error("Error during dashboard redirect:",l)}}function d(l){if(l.preventDefault(),!S())return;const n=e&&e.value.trim()||"",v=i&&i.value||"";M(!0),setTimeout(()=>{n===f&&v===m?t():(M(!1),e&&L(e,"Invalid credentials. Use demo username: BROKER"),i&&L(i,"Invalid credentials. Use demo password: 123"),e&&e.focus())},p)}function h(l){l.key==="Escape"&&a&&!a.hidden&&b()}function u(){if(a=r("#brokerLogin"),!a){console.warn("Broker login modal not found in DOM");return}if(c=r("#bl-form",a),e=r("#bl-user",a),i=r("#bl-pass",a),!c||!e||!i){console.error("Required form elements not found");return}const l=r("#dealerLoginBtn");l&&l.addEventListener("click",E),o(".bl-close, .bl-overlay",a).forEach(n=>{n.addEventListener("click",b)}),c.addEventListener("submit",d),document.addEventListener("keydown",h)}async function g(){try{await P("body",s,{position:"beforeend"}),setTimeout(u,10),console.log("Broker login modal initialized successfully")}catch(l){console.error("Failed to load broker login modal:",l)}}g(),window.BrokerLogin={open:E,close:b}})();document.addEventListener("DOMContentLoaded",function(){const o=document.querySelector(".header");document.querySelector(".contact-hero")||document.querySelector(".hero")||document.querySelector(".title-page");const r={offset:100,floatingClass:"floating",mobileBreakpoint:767};let a=!1,c=!1;function e(){return window.innerWidth<=r.mobileBreakpoint}function i(){if(e()){a&&s(!1),c=!1;return}const p=window.scrollY>=r.offset;p!==a&&s(p),c=!1}function s(w){w?(o.classList.add(r.floatingClass),o.setAttribute("data-state","floating")):(o.classList.remove(r.floatingClass),o.removeAttribute("data-state")),a=w;const p=new CustomEvent("navbarStateChange",{detail:{floating:a}});window.dispatchEvent(p)}function f(){c||(requestAnimationFrame(()=>{i(),c=!1}),c=!0)}function m(){i(),window.addEventListener("scroll",f,{passive:!0});let w;window.addEventListener("resize",()=>{clearTimeout(w),w=setTimeout(()=>{i()},250)}),window.addEventListener("orientationchange",()=>{setTimeout(i,300)}),setTimeout(()=>{o.style.transition="all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},100)}m(),window.Navbar={enableFloating:()=>s(!0),disableFloating:()=>s(!1),toggleFloating:()=>s(!a),getState:()=>({floating:a}),refresh:()=>i()}});(()=>{let o=!1,r=!1,a=50,c=!1,e=null,i=0,s,f,m;function w(){s=document.querySelector(".ba-handle"),f=document.querySelector(".ba-after"),m=document.querySelector(".hero-content"),!(!s||!f)&&(b(),window.addEventListener("resize",E),u(50),S(),L(),p())}function p(){a=50,o=!1,r=!1,u(50),S()}function E(){window.resizeTimeout&&clearTimeout(window.resizeTimeout),window.resizeTimeout=setTimeout(()=>{b(),u(a)},150)}function b(){const n=c;c=window.innerWidth<=768,n!==c&&(y(),u(a))}function y(){c?(document.body.classList.add("mobile-slider"),document.body.classList.remove("desktop-slider")):(document.body.classList.add("desktop-slider"),document.body.classList.remove("mobile-slider"))}function L(){s.addEventListener("mousedown",t),document.addEventListener("mousemove",d),document.addEventListener("mouseup",h),s.addEventListener("touchstart",t,{passive:!1}),document.addEventListener("touchmove",d,{passive:!1}),document.addEventListener("touchend",h),s.addEventListener("selectstart",n=>n.preventDefault()),s.addEventListener("touchend",n=>{const v=Date.now();v-i<300&&(n.preventDefault(),r||g()),i=v})}function S(){f&&(f.style.transition="none"),s&&(s.style.transition="none")}function M(){f&&(f.style.transition="clip-path 0.1s ease-out"),s&&(s.style.transition="transform 0.3s ease")}function t(n){if(n.preventDefault(),r)return;e&&(cancelAnimationFrame(e),e=null),o=!0,r=!1,S(),m&&(m.style.opacity="0",m.style.pointerEvents="none");const C=document.querySelector(".hero").getBoundingClientRect(),k=c?n.type==="mousedown"?n.clientY:n.touches[0].clientY:n.type==="mousedown"?n.clientX:n.touches[0].clientX,T=c?C.height:C.width,I=c?C.top:C.left,B=Math.max(0,Math.min(T,k-I))/T*100;a=Math.max(5,Math.min(95,B)),u(a),s.classList.add("dragging")}function d(n){if(!o)return;n.preventDefault();const C=document.querySelector(".hero").getBoundingClientRect(),k=c?n.type==="mousemove"?n.clientY:n.touches[0].clientY:n.type==="mousemove"?n.clientX:n.touches[0].clientX,T=c?C.height:C.width,I=c?C.top:C.left,B=Math.max(0,Math.min(T,k-I))/T*100;a=Math.max(5,Math.min(95,B)),u(a)}function h(){o&&(o=!1,s.classList.remove("dragging"),g())}function u(n){a=n,c?(s.style.top=`${n}%`,s.style.left="50%",s.style.transform="translate(-50%, -50%)",f.style.clipPath=`inset(0 0 ${100-n}% 0)`):(s.style.left=`${n}%`,s.style.top="auto",s.style.transform="translateX(-50%)",f.style.clipPath=`inset(0 ${100-n}% 0 0)`)}function g(){if(r)return;r=!0,S();const n=600,v=performance.now(),C=a,k=50;function T(I){const A=I-v,B=Math.min(A/n,1),$=1-Math.pow(1-B,3),O=C+(k-C)*$;u(O),B<1?e=requestAnimationFrame(T):l()}e=requestAnimationFrame(T)}function l(){r=!1,o=!1,a=50,u(50),e&&(cancelAnimationFrame(e),e=null),m&&(m.style.opacity="1",m.style.pointerEvents="auto"),setTimeout(()=>{M()},50)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",w):w(),window.resetBeforeAfterSlider=p})();const _="modulepreload",R=function(o){return"/Eastleigh-Turf-Grass-Clean/"+o},q={},D=function(r,a,c){let e=Promise.resolve();if(a&&a.length>0){let w=function(p){return Promise.all(p.map(E=>Promise.resolve(E).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var s=w;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");e=w(a.map(p=>{if(p=R(p),p in q)return;q[p]=!0;const E=p.endsWith(".css"),b=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const y=document.createElement("link");if(y.rel=E?"stylesheet":_,E||(y.as="script"),y.crossOrigin="",y.href=p,m&&y.setAttribute("nonce",m),document.head.appendChild(y),E)return new Promise((L,S)=>{y.addEventListener("load",L),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function i(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return e.then(f=>{for(const m of f||[])m.status==="rejected"&&i(m.reason);return r().catch(i)})};(()=>{let o=[],r=0;function a(){try{c(),p(),M(),S(),window.CartState&&window.CartState.subscribe(t=>{w()})}catch(t){console.warn("Cart initialization failed:",t)}}function c(){const t=localStorage.getItem("eastleighCart");if(t)try{o=JSON.parse(t),m()}catch(d){console.error("Error loading cart from storage:",d),o=[]}}function e(){localStorage.setItem("eastleighCart",JSON.stringify(o))}function i(t){const d=o.findIndex(h=>h.id===t.id&&h.length===t.length&&h.width===t.width);d!==-1?o[d].quantity+=t.quantity:o.push(t),m(),e(),p(),window.CartState&&window.CartState.add(t),L("Item Added",`${t.name} has been added to your cart`,"success")}function s(t){const d=o[t];o.splice(t,1),m(),e(),p(),window.CartState&&window.CartState.remove(d.id),L("Item Removed",`${d.name} has been removed from your cart`,"error")}function f(t,d){if(d<=0){s(t);return}o[t].quantity=d,o[t].total=o[t].area*o[t].price*d,m(),e(),p()}function m(){r=o.reduce((t,d)=>t+d.total,0)}function w(){try{const t=document.getElementById("cartTotal"),d=document.getElementById("applyDiscountBtn"),h=document.getElementById("enterCouponBtn");if(!t)return;const u=o.reduce((n,v)=>n+v.total,0),g=window.CartState?window.CartState.getDiscountAmount():0,l=u-g;if(g>0?t.innerHTML=`
                    <div class="cart-total-breakdown">
                        <div class="subtotal">Subtotal: KES ${u.toLocaleString()}</div>
                        <div class="discount">Discount: -KES ${g.toLocaleString()}</div>
                        <div class="final-total">Total: KES ${l.toLocaleString()}</div>
                    </div>
                `:t.textContent=`KES ${u.toLocaleString()}`,d){const n=window.CartState&&window.CartState.getDiscountAmount()>0;d.innerHTML=n?'<i class="fas fa-check"></i> Discount Applied':'<i class="fas fa-tag"></i> Apply Discount',d.classList.toggle("applied",n)}if(h){const n=window.CartState&&window.CartState.appliedCoupon;h.innerHTML=n?'<i class="fas fa-check"></i> Coupon Applied':'<i class="fas fa-ticket-alt"></i> Enter Coupon',h.classList.toggle("applied",n)}}catch(t){console.warn("Cart summary update failed:",t)}}function p(){try{E(),b()}catch(t){console.warn("Cart display update failed:",t)}}function E(){try{const t=document.getElementById("cartCount"),d=document.getElementById("cartCountBadge"),h=o.reduce((u,g)=>u+g.quantity,0);t&&(t.textContent=h),d&&(d.textContent=h)}catch(t){console.warn("Cart count update failed:",t)}}function b(){try{const t=document.getElementById("cartItems"),d=document.getElementById("cartSummary"),h=document.getElementById("cartTotal");if(!t)return;o.length===0?(t.innerHTML=`
                    <div class="empty-cart">
                        <i class="fas fa-shopping-basket"></i>
                        <p>Your cart is empty</p>
                        <span>Add some products to get started</span>
                    </div>
                `,d&&(d.style.display="none")):(t.innerHTML=o.map((u,g)=>`
                    <div class="cart-item">
                        <div class="cart-item-image">
                            <img src="${u.image}" alt="${u.name}" />
                        </div>
                        <div class="cart-item-details">
                            <div class="cart-item-name">${u.name}</div>
                            <div class="cart-item-dimensions">${u.length}m Ã— ${u.width}m</div>
                            <div class="cart-item-price">KES ${u.total.toLocaleString()}</div>
                        </div>
                        <div class="cart-item-actions">
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="window.CartComponent.updateQuantity(${g}, ${u.quantity-1})">-</button>
                                <span class="quantity-display">${u.quantity}</span>
                                <button class="quantity-btn" onclick="window.CartComponent.updateQuantity(${g}, ${u.quantity+1})">+</button>
                            </div>
                            <button class="remove-item-btn" onclick="window.CartComponent.remove(${g})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `).join(""),d&&(d.style.display="block",w()))}catch(t){console.warn("Cart panel update failed:",t)}}function y(){o=[],r=0,e(),p(),window.CartState&&window.CartState.clear(),L("Cart Cleared","All items have been removed from your cart","error")}function L(t,d,h="success"){const u=document.getElementById("toast");if(!u)return;const g=u.querySelector(".toast-title"),l=u.querySelector(".toast-description");g&&(g.textContent=t),l&&(l.textContent=d),u.className=`toast ${h}`,u.classList.add("show"),setTimeout(()=>{u.classList.remove("show")},3e3)}function S(){(window.location.pathname.includes("products.html")||window.location.pathname==="/"&&window.location.hash==="#cart")&&(D(()=>import("./discountModal-D6AeGENL.js"),__vite__mapDeps([0,1])).then(t=>{window.discountModal=t.discountModal}),D(()=>import("./couponModal-Cu4ki2Tl.js"),__vite__mapDeps([2,1])).then(t=>{window.couponModal=t.couponModal}),D(()=>import("./checkoutModal-D2IR20si.js"),[]).then(t=>{window.checkoutModal=t.checkoutModal,window.checkoutModal.init()}))}function M(){try{const t=document.getElementById("clearCartBtn");t&&t.addEventListener("click",y);const d=document.getElementById("submitOrderBtn");d&&d.addEventListener("click",()=>{window.checkoutModal?window.checkoutModal.open():window.location.href="/Eastleigh-Turf-Grass-Clean/products.html#cart"});const h=document.getElementById("applyDiscountBtn"),u=document.getElementById("enterCouponBtn");h&&h.addEventListener("click",()=>{window.discountModal?window.discountModal.open():window.location.href="/Eastleigh-Turf-Grass-Clean/products.html#cart"}),u&&u.addEventListener("click",()=>{window.couponModal?window.couponModal.open():window.location.href="/Eastleigh-Turf-Grass-Clean/products.html#cart"})}catch(t){console.warn("Cart events binding failed:",t)}}window.CartComponent={init:a,add:i,remove:s,updateQuantity:f,clear:y,getItems:()=>o,getTotal:()=>r,getCount:()=>o.reduce((t,d)=>t+d.quantity,0)},document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a()})();document.addEventListener("DOMContentLoaded",async()=>{const o=document.querySelectorAll(".hero-slide");let r=0;function a(e){o.forEach((i,s)=>{i.classList.toggle("active",s===e)})}function c(){r=(r+1)%o.length,a(r)}o.length>0&&(a(r),setInterval(c,5e3)),window.Cart&&window.Cart.subscribe&&window.Cart.subscribe(e=>{const i=document.getElementById("cartCount");i&&(i.textContent=e.items.length)})});
